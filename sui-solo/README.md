<div align="center">

# ğŸš€ SUI Solo

**Distributed Proxy Cluster Management System**

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Docker](https://img.shields.io/badge/Docker-Required-blue?logo=docker)](https://www.docker.com/)
[![Python](https://img.shields.io/badge/Python-3.11+-green?logo=python)](https://www.python.org/)

[English](README.md) | [ç®€ä½“ä¸­æ–‡](README_CN.md)

</div>

---

## ğŸš€ Quick Start

### Prerequisites

- Docker 20.10+ with Docker Compose
- **Domain name for Master** (required for HTTPS)
- Domain name for each Node
- Ports: 80, 443 (Master & Node), 53 (Node only)

### Install Master

```bash
git clone https://github.com/yourusername/sui-solo.git
cd sui-solo
sudo ./install.sh --master
```

You'll be prompted for:
1. **Master domain** (e.g., `panel.example.com`) - Required for HTTPS!
2. **Email** for SSL certificates

> ğŸ“ **Save the Cluster Secret** displayed after installation!

### Install Node

```bash
sudo ./install.sh --node
# Enter: Cluster Secret, Node Domain, Email
```

### Add Node to Master

Open `https://YOUR_MASTER_DOMAIN` â†’ Click **"+ Add Node"**

---

## ğŸ”’ Security Architecture

### HTTPS Everywhere

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MASTER (HTTPS Only)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   Caddy     â”‚ â”€â”€â”€â–¶ â”‚  Flask App  â”‚                       â”‚
â”‚  â”‚  (Gateway)  â”‚      â”‚  (Internal) â”‚                       â”‚
â”‚  â”‚  :80/:443   â”‚      â”‚    :5000    â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    HTTPS + Token Auth
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NODE (HTTPS Only)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   Caddy     â”‚ â”€â”€â”€â–¶ â”‚   Agent     â”‚ â”€â”€â”€â–¶ Sing-box        â”‚
â”‚  â”‚  (Gateway)  â”‚      â”‚  (Hidden)   â”‚ â”€â”€â”€â–¶ AdGuard         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Three-Layer Protection

```mermaid
flowchart LR
    A[1. HTTPS<br/>TLS Encryption] --> B[2. Hidden Path<br/>SHA256 SALT:token]
    B --> C[3. Token Auth<br/>X-SUI-Token Header]
```

### Salted Path Generation

```python
SALT = "SUI_Solo_Secured_2024"

def get_hidden_path(token: str) -> str:
    combined = f"{SALT}:{token}"
    return hashlib.sha256(combined.encode()).hexdigest()[:16]

# API: /{16-char-hash}/api/v1/status
```

---

## ğŸ“ Project Structure

```
sui-solo/
â”œâ”€â”€ install.sh              # Interactive installer
â”œâ”€â”€ README.md / README_CN.md
â”œâ”€â”€ master/
â”‚   â”œâ”€â”€ docker-compose.yml  # Caddy + Flask
â”‚   â”œâ”€â”€ app.py              # Flask backend
â”‚   â””â”€â”€ config/caddy/       # Generated Caddyfile
â””â”€â”€ node/
    â”œâ”€â”€ docker-compose.yml  # Caddy + Agent + Services
    â”œâ”€â”€ agent.py            # Node control API
    â””â”€â”€ templates/          # Caddyfile template
```

---

## âš™ï¸ Configuration

### Master `.env`

```env
CLUSTER_SECRET=<auto-generated>
MASTER_DOMAIN=panel.example.com
ACME_EMAIL=admin@example.com
```

### Node `.env`

```env
CLUSTER_SECRET=<from-master>
NODE_DOMAIN=node1.example.com
PATH_PREFIX=<auto-computed>
ACME_EMAIL=admin@example.com
```

---

## ğŸ”§ Troubleshooting

| Issue | Solution |
|-------|----------|
| SSL error | Ensure DNS points to server, port 80 accessible |
| Token error | Verify secret in `.env` matches Master |
| Port in use | `sudo lsof -i :80` to find conflicting process |

---

## âš ï¸ Disclaimer

This project is for **educational purposes only**. Users must comply with local laws. Authors are not responsible for misuse.

---

## ğŸ“„ License

MIT License - see [LICENSE](LICENSE)

---

<div align="center">
Made with â¤ï¸ for the open source community
</div>
